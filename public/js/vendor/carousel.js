var Mobify=window.Mobify=window.Mobify||{};Mobify.$=Mobify.$||window.Zepto||window.jQuery;Mobify.UI=Mobify.UI||{classPrefix:"m-"};(function(t,e){t.support=t.support||{};t.extend(t.support,{touch:"ontouchend"in e})})(Mobify.$,document);Mobify.UI.Utils=function(t){var exports={},e=t.support;exports.events=e.touch?{down:"touchstart",move:"touchmove",up:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup"};exports.getCursorPosition=e.touch?function(t){t=t.originalEvent||t;return{x:t.touches[0].clientX,y:t.touches[0].clientY}}:function(t){return{x:t.clientX,y:t.clientY}};exports.getProperty=function(t){var e=["Webkit","Moz","O","ms",""],i=document.createElement("div").style;for(var n=0;n<e.length;++n){if(i[e[n]+t]!==undefined){return e[n]+t}}return};t.extend(e,{transform:!!exports.getProperty("Transform"),transform3d:!!(window.WebKitCSSMatrix&&"m11"in new WebKitCSSMatrix)});var i=exports.getProperty("Transform");if(e.transform3d){exports.translateX=function(t,e){if(typeof e=="number")e=e+"px";t.style[i]="translate3d("+e+",0,0)"}}else if(e.transform){exports.translateX=function(t,e){if(typeof e=="number")e=e+"px";t.style[i]="translate("+e+",0)"}}else{exports.translateX=function(t,e){if(typeof e=="number")e=e+"px";t.style.left=e}}var n=exports.getProperty("Transition"),s=exports.getProperty("TransitionDuration");exports.setTransitions=function(t,e){if(e){t.style[s]=""}else{t.style[s]="0s"}};exports.requestAnimationFrame=function(){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var e=function(){t.apply(window,arguments)};return e}();return exports}(Mobify.$);Mobify.UI.Carousel=function(t,e){var i={dragRadius:10,moveRadius:20,classPrefix:undefined,classNames:{outer:"carousel",inner:"carousel-inner",item:"item",center:"center",touch:"has-touch",dragging:"dragging",active:"active"}},n=t.support;var s=function(t,e){this.setOptions(e);this.initElements(t);this.initOffsets();this.initAnimation();this.bind()};s.defaults=i;s.prototype.setOptions=function(e){var n=this.options||t.extend({},i,e);n.classNames=t.extend({},n.classNames,e.classNames||{});n.classPrefix=n.classPrefix||Mobify.UI.classPrefix;this.options=n};s.prototype.initElements=function(e){this._index=1;this.element=e;this.$element=t(e);this.$inner=this.$element.find("."+this._getClass("inner"));this.$items=this.$inner.children();this.$start=this.$items.eq(0);this.$sec=this.$items.eq(1);this.$current=this.$items.eq(this._index);this._length=this.$items.length;this._alignment=this.$element.hasClass(this._getClass("center"))?.5:0};s.prototype.initOffsets=function(){this._offset=0;this._offsetDrag=0};s.prototype.initAnimation=function(){this.animating=false;this.dragging=false;this._needsUpdate=false;this._enableAnimation()};s.prototype._getClass=function(t){return this.options.classPrefix+this.options.classNames[t]};s.prototype._enableAnimation=function(){if(this.animating){return}e.setTransitions(this.$inner[0],true);this.$inner.removeClass(this._getClass("dragging"));this.animating=true};s.prototype._disableAnimation=function(){if(!this.animating){return}e.setTransitions(this.$inner[0],false);this.$inner.addClass(this._getClass("dragging"));this.animating=false};s.prototype.update=function(){if(this._needsUpdate){return}var t=this;this._needsUpdate=true;e.requestAnimationFrame(function(){t._update()})};s.prototype._update=function(){if(!this._needsUpdate){return}var t=Math.round(this._offset+this._offsetDrag);e.translateX(this.$inner[0],t);this._needsUpdate=false};s.prototype.bind=function(){var i=Math.abs,s=false,o=false,r=this.options.dragRadius,a,f,u,l,h=this,d=this.$element,c=this.$inner,m=this.options,p=this.$element.width(),g=false,y=false;function v(t){if(!n.touch)t.preventDefault();s=true;o=false;a=e.getCursorPosition(t);f=0;u=0;l=false;h._disableAnimation();g=h._index==1;y=h._index==h._length}function _(t){if(!s||o)return;var n=e.getCursorPosition(t);f=a.x-n.x;u=a.y-n.y;if(l||i(f)>i(u)&&i(f)>r){l=true;t.preventDefault();if(g&&f<0){f=f*-p/(f-p)}else if(y&&f>0){f=f*p/(f+p)}h._offsetDrag=-f;h.update()}else if(i(u)>i(f)&&i(u)>r){o=true}}function $(t){if(!s){return}s=false;h._enableAnimation();if(!o&&i(f)>m.moveRadius){if(f>0){h.next()}else{h.prev()}}else{h._offsetDrag=0;h.update()}}function b(t){if(l)t.preventDefault()}c.on(e.events.down+".carousel",v).on(e.events.move+".carousel",_).on(e.events.up+".carousel",$).on("click.carousel",b).on("mouseout.carousel",$);d.on("click","[data-slide]",function(e){e.preventDefault();var i=t(this).attr("data-slide"),n=parseInt(i,10);if(isNaN(n)){h[i]()}else{h.move(n)}});d.on("afterSlide",function(t,e,i){h.$items.eq(e-1).removeClass(h._getClass("active"));h.$items.eq(i-1).addClass(h._getClass("active"));h.$element.find("[data-slide='"+e+"']").removeClass(h._getClass("active"));h.$element.find("[data-slide='"+i+"']").addClass(h._getClass("active"))});d.trigger("beforeSlide",[1,1]);d.trigger("afterSlide",[1,1]);h.update()};s.prototype.unbind=function(){this.$inner.off()};s.prototype.destroy=function(){this.unbind();this.$element.trigger("destroy");this.$element.remove();this.$element=null;this.$inner=null;this.$start=null;this.$current=null};s.prototype.move=function(t,e){var i=this.$element,n=this.$inner,s=this.$items,o=this.$start,r=this.$current,a=this._length,f=this._index;e=e||{};if(t<1){t=1}else if(t>this._length){t=a}if(t==this._index){}i.trigger("beforeSlide",[f,t]);this.$current=r=s.eq(t-1);var u=r.prop("offsetLeft")+r.prop("clientWidth")*this._alignment,l=o.prop("offsetLeft")+o.prop("clientWidth")*this._alignment;var h=-(u-l);this._offset=h;this._offsetDrag=0;this._index=t;this.update();i.trigger("afterSlide",[f,t])};s.prototype.next=function(){this.move(this._index+1)};s.prototype.prev=function(){this.move(this._index-1)};return s}(Mobify.$,Mobify.UI.Utils);(function(t){t.fn.carousel=function(e,i){var n=t.extend({},t.fn.carousel.defaults);if(typeof e=="object"){n=t(n,e);i=null;e=null}this.each(function(){var s=t(this),o=this._carousel;if(!o){o=new Mobify.UI.Carousel(this,n)}if(e){o[e](i);if(e==="destroy"){o=null}}this._carousel=o});return this};t.fn.carousel.defaults={}})(Mobify.$);